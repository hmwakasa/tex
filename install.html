<!DOCTYPE html>
<html lang="ja">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1">
	<meta name="author" content="TeX 日本語ドキュメント作成プロジェクト">
	<title>TeX のインストール</title>
	<link rel="stylesheet" type="text/css" href="./jscss/taikai.css"><!-- css -->
	<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML,/jscss/mathjax.js"></script><!-- Mathjax -->
	<script src="./jscss/twitter.js" type="text/javascript"></script><!-- twitter リンク用 -->
	<script src="./jscss/analytics.js" type="text/javascript"></script><!-- Google Analytics-->
	<!-- twitter card -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="@CareleSmith9">
	<meta property="og:url" content="http://www.ep.sci.hokudai.ac.jp/~tex/install.html">
	<meta property="og:title" content="TeX のインストール">
	<meta property="og:description" content="TeX のインストール" />
	<meta property="og:image" content="http://www.ep.sci.hokudai.ac.jp/~tex/favicon.png">
</head>
<body>
<div class="wrapper">
	</section>
		<header>
			<h1>TeX のインストール</h1>
			<div class="update">
				人見祥磨<br>
				<del><time>2020-04-10</time>作成</del>
				<del><time>2020-04-26</time>更新</del>
				<del><time>2020-04-27</time>更新</del>
				<del><time>2021-04-07</time>更新</del>
				<ins><time>2021-04-08</time>更新</ins>
			</div>
		</header>
		<nav class="head">
			<ul itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
				<li><a href="./" itemprop="url"><span itemprop="title">TeX 日本語ドキュメント作成プロジェクト</span></a></li>
				<li><a href="./#index" itemprop="url"><span itemprop="title">目次</span></a></li>
				<li><a href="./#what" itemprop="url"><span itemprop="title">TeX とはなにか</span></a></li>
				<li><span itemprop="title">TeX のインストール</span></li>
			</ul><br>
			<a href="https://twitter.com/share" class="twitter-share-button" data-lang="ja" target="_blank">ツイート</a>
		</nav>
		<p>
			ここでは、TeX を自分の使っているパソコンにインストールするお話をします。
		</p>
		<section>
			<h2>TeX Live とはなにか</h2>
			<p>
				TeX とはなにか、TeX Live とはなにかという話については、
				<a href="./eptex/eptex-handout.pdf">最大限 TeX 入門</a>を見てください。
			</p>
		</section>
		<section>
			<h2>最新の TeX Live を Linux にインストールする</h2>
			<p>
				最新の TeX Live を入手する方法は、
				<a href="https://texwiki.texjp.org/?Linux" target="_blank">TeX Wiki</a>
				に詳しくまとめてあります。そちらを参考にしてください。
			</p>
			<p>
				まず、最新のインストラーをダウンロードします。
			</p>
			<code class="block">
				% wget http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz<br>
			</code>
			<p>
				次に、ダウンロードしたインストラーを解凍し、sudo 権限で実行します。
			</p>
			<code class="block">
				% tar xvf install-tl-unx.tar.gz<br>
				% cd install-tl*<br>
				% sudo ./install-tl -no-gui -repository http://mirror.ctan.org/systems/texlive/tlnet/
			</code>
			<p>
				なお、インストーラは Perl を利用しています。
				Perl がシステムに入っていない場合にはエラーが発生するので、
				エラーが発生した場合は <code>sudo apt install perl</code> などとして
				Perl をインストールしてから再び試してみてください。
			</p>
			<p>
				An old installation of TeX Live has been found... などと言われた場合は <code>n</code>
				で拒否します。Enter command と言われたら <code>I</code> と入力してインストール開始です。
				ネットワーク経由で必要なファイルがダウンロードされ、インストールが進みます。
			</p>
			<p>
				最後にパスを通してインストール完了です。
				パスを通すとは、インストールしたコマンドをシェルが見つけることができるようにする作業です。
				以下はパスの通し方の例です。パスの通し方は、環境によって異なるので、
				各自調べてください。
				<code>20XX</code> の部分は適宜変えてください。
			</p>
			<code class="block">
				$ echo 'export PATH=$PATH:/usr/local/texlive/20XX/bin/*/' &gt;&gt; ~/.bashrc<br>
				$ source ~/.bashrc
			</code>
			<p>
				最新の TeX Live をインストールした場合、適宜 TeX Live をアップデートしなければなりません。
				TeX Live のアップデートなど、TeX Live 全体の運用を管理するコマンドは、
				<code>tlmgr</code> コマンドです。TeX Live をアップデートするために、
				定期的に次のコマンドを走らせましょう。<code>update</code> がアップデートをするコマンドで、
				<code>--self</code> が <code>tlmgr</code> 自身を更新するオプション、
				<code>--all</code> は更新可能なパッケージを全て更新するオプションです。
			</p>
			<code class="block">
				% sudo tlmgr update --self --all
			</code>
			<p>
				年度が変わる頃に TeX Live は大型アップデートがあります
				（例: TeX Live 2019 →TeX Live 2020）。
				大型アップデートは <code>tlmgr</code> では行われないので、
				大型アップデートを適用するにはインストールの手順を再度行う必要があります。
			</p>
		</section>
		<section>
			<h2>パッケージ管理ツールを用いたインストール</h2>
			<p>
				Linux ディストリビューションに含まれている TeX Live をインストールすることもできます。
				ただし、この方法でインストールすると、（先程も述べたとおり）仕様変更によるバグが混入したり、
				TeX Live の更新と Linux ディストリビューションの更新とのタイムラグがあるなどで、
				思わぬ不具合の原因になるかもしれません。個人的には、この方法は勧めません。
				ただし、システムのパッケージ管理と一元化できるというメリットもあります。
			</p>
			<p>
				TeX Live は、いくつかのパッケージに別れて収録されていますが、
				パッケージが足りずにエラーが発生することを避けるために、
				フルインストールするのが良いでしょう。
			</p>
			<code class="block">
				% sudo apt install texlive-full
			</code>
		</section>
		<section>
			<h2>Windows の場合</h2>
			<p>
				Windows に TeX を導入する場合、
				<a href="http://w32tex.org/index-ja.html" target="_blank">W32TeX</a>
				を用いるのが良いかと思います。W32TeX は TeX Live がベースになっているので、
				TeX Live をインストールするのと大差ありません。
			</p>
			<p>
				<a href="https://texwiki.texjp.org/?W32TeX" target="_blank">TeX Wiki の記事</a>
				に W32TeX を導入する方法があるので、それを参考にしてください。
			</p>
		</section>
		<section>
			<h2>macOS の場合</h2>
			<p>
				macOS の場合は、<a href="https://texwiki.texjp.org/?MacTeX" target="_blank">MacTeX</a>
				を利用して TeX Live をインストールすることができます。詳しくは TeX Wiki を御覧ください。
				ただし、Ghostscript が MacTeX でインストールしたものと Homebrew でインストールしたものとで衝突し、
				不具合が起こることがあります。この場合は、Homebrew を再インストールしてください。
			</p>
			<p>
				上述の通り、MacTeX は Homebrew との相性が良くなく、また、
				インストールしたものがいろいろなディレクトリに配置され、
				アンインストールが容易でないので、私はあまりおすすめできません。
				上記の install-tl を用いたインストール方法も macOS で利用できるので、
				install-tl を用いてインストールすることをおすすめします。
			</p>
		</section>
		<section>
			<h2>TeX Live の古いバージョンをインストールする</h2>
			<p>
				古いバージョンの TeX Live をインストールする例として、
				TeX Live 2019 をインストールします。
				古いバージョンの TeX Live をインストールする利点は、
				急な仕様変更によりバグが混入する恐れがないことです。
				近年（2020 年ごろ）の LaTeX は仕様変更が多いので、
				この利点は以前より大きいものになっています。
			</p>
			<p>
				なお、インストールの大きな流れ自体は、
				<a href="https://texwiki.texjp.org/Linux" target="_blank">TeX Wiki の記事</a>
				も参考になります。また、過去の TeX Live をインストールする話は、
				<a href="https://qiita.com/munepi/items/44117be9180ac7a86d82" target="_blank">山本宗宏さんの記事</a>
				も参考になります。
			</p>
			<p>
				まず、過去の TeX Live が集められている
				<a href="ftp://tug.org/historic/systems/texlive/" target="_blank">TeX Live historic</a>
				にアクセスします。そうすると、“2019” というディレクトリがあるので、
				その中を見てみると install-tl-unx.tar.gz があります。
				これがインストーラです。wget して、インストーラを起動する直前まで持っていきましょう。
			</p>
			<code class="block">
				% wget ftp://tug.org/historic/systems/texlive/2019/install-tl-unx.tar.gz<br>
				% tar xvf install-tl-unx.tar.gz<br>
				% cd install-tl-*
			</code>
			<p>
				これ以降は先に上げた山本宗宏さんの記事の受け売りです。
				私自身はまだ試したことがありません……。
			</p>
			<p>
				実際に、インストーラー install-tl を sudo 権限で実行します。
				今回、TeX Live 2019 frozen の tlnet リポジトリとして、TeX Live historic に補完されている
				<span class="url">ftp://tug.org/texlive/historic/2019/tlnet-final/</span> を利用しますので、
				その場所を <code>-repository</code> オプションを用いて指定します。
			</p>
			<code class="block">
				% sudo ./install-tl -repository ftp://tug.org/texlive/historic/2019/tlnet-final/
			</code>
			<p>
				インストールが終了したら、シェルが TeX の場所を見つけることができるようにパスを通します。
			</p>
		</section>
		<section>
			<h2>インストール後の確認</h2>
			<p>
				インストールが終わったら、TeX がただしくインストールできているか確認しましょう。
				ターミナルで <code>tex</code> と打って、インストールしたバージョンの TeX
				が正しく起動できれば成功です。
			</p>
			<code class="block">
				% tex<br>
				This is TeX, Version 3.14159265 (TeX Live 2020) (preloaded format=tex)<br>
				**
			</code>
		</section>
	</section>
	<nav class="foot">
		<a href="https://twitter.com/share" class="twitter-share-button" data-lang="ja" target="_blank">ツイート</a>
		<a href="./" class="top">トップへ</a>
	</nav>
</div>
</body>
